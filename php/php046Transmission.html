<!doctype html>
<html lang="fr">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
          integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <!--    <link href="../css/bootstrap.min.css" rel="stylesheet" media="screen">-->
    <link href="../dist/css/bootstrap4-modif.css" rel="stylesheet" media="screen">
    <link href="../dist/css/docs.min.css" rel="stylesheet">
    <link href="../dist/css/docs.perso.css" rel="stylesheet">
    <title>PHP - transmettre des données</title>
    <script>
        /*        window.ga = window.ga || function () {
                    (ga.q = ga.q || []).push(arguments)
                };
                ga.l = +new Date;
                ga('create', 'UA-146052-10', 'chchabin.free.fr');
                ga('set', 'anonymizeIp', true);
                ga('send', 'pageview');*/
    </script>
</head>
<body>
<a class="skippy sr-only sr-only-focusable" href="#content">
    <span class="skippy-text">Skip to main content</span>
</a>
<!--        navbar-->
<header class="navbar navbar-expand navbar-dark flex-column flex-md-row bd-navbar">
    <a class="navbar-brand mr-0 mr-md-2" href="/" aria-label="Bootstrap">

    </a>

    <div class="navbar-nav-scroll">
        <ul class="navbar-nav bd-navbar-nav flex-row">
            <li class="nav-item">
                <a class="nav-link " href="php01Gintroduction.html"
                   onclick="ga('send', 'event', 'Navbar', 'Community links', 'Bootstrap');">Guide PHP</a>
            </li>
            <li class="nav-item">
                <a class="nav-link active" href="index.html"
                   onclick="ga('send', 'event', 'Navbar', 'Community links', 'Docs');">Documentation</a>
            </li>
        </ul>
    </div>
</header>
<div class="container-fluid">
    <div class="row flex-xl-nowrap">
        <!--        Menu Gauche-->
        <div class="col-12 col-md-3 col-xl-2 bd-sidebar">
            <nav class="collapse bd-links" id="bd-docs-nav">
                <div class="bd-toc-item">
                    <a class="bd-toc-link " href="php01Gintroduction.html">
                        I - Introduction au développement Web
                    </a>

                    <ul class="nav bd-sidenav">
                        <li>
                            <a href="#foncweb">
                                A - Le fonctionnement du Web
                            </a>
                        </li>
                        <li>
                            <a href="#protocole-HTTP">
                                B - Le protocole HTTP
                            </a>
                        </li>
                        <li>
                            <a href="#siteDyn">C - L'évolution vers des sites dynamiques
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="bd-toc-item ">
                    <a class="bd-toc-link" href="php02Gbaseslg.html">
                        II - Les bases du langage
                    </a>
                </div>
                <div class="bd-toc-item">
                    <a class="bd-toc-link" href="php031ProgPhp_Variables.html">
                        III - Programmer avec PHP
                    </a>

                    <ul class="nav bd-sidenav">
                        <li>
                            <a href="#variables">A - Les variables
                            </a>
                        </li>
                        <li>
                            <a href="#tests">B - Tests et conditions
                            </a>
                        </li>
                        <li>
                            <a href="#tableau">C - Les tableaux
                            </a>
                        </li>
                        <li>
                            <a href="#boucles">D - Les boucles
                            </a>
                        </li>
                        <li>
                            <a href="#fonctions"> E - Les fonctions
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="bd-toc-item active">
                    <a class="bd-toc-link" href="php041Transmission.html">
                        IV - Transmettre des données entre des pages
                    </a>

                    <ul class="nav bd-sidenav">
                        <li>
                            <a href="php041Transmission.html">A - Notion de variable superglobale
                            </a>
                        </li>
                        <li>
                            <a href="php042Transmission.html">B - Notion de formulaire
                            </a>
                        </li>
                        <li>
                            <a href="php043Transmission.html">C - <code>$_GET</code> et la transmission via l'URL
                            </a>
                        </li>
                        <li>
                            <a href="php044Transmission.html">D - <code>$_POST</code> et la transmission via un formulaire
                            </a>
                        </li>
                        <li>
                            <a href="php045Transmission.html">E - <code>$_SESSION</code> et la transmission via la session
                            </a>
                        </li>
                        <li>
                            <a href="php046Transmission.html">F - <code>htmlspecialchars</code> et la transmission de données
                                et sécurité
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="bd-toc-item">
                    <a class="bd-toc-link" href="php05AccesSGBD_Introduction.html">
                        V - Accéder à une base de données
                    </a>

                    <ul class="nav bd-sidenav">
                        <li>
                            <a href="#sgbdIntro"> A - Introduction
                            </a>
                        </li>
                        <li>
                            <a href="#sgbdConect">B - Connexion à la base de données
                            </a>
                        </li>
                        <li>
                            <a href="#sgbdRequete">C - Exécution de requêtes SQL
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
        <!--        Menu droite-->
        <div class="d-none d-xl-block col-xl-2 bd-toc">

        </div>
        <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content" role="main">
            <h1 class="bd-title" id="content">IV - Transmettre des données entre des pages</h1>
            <p class="bd-lead">L'objectif de ce chapitre est de connaître les différents moyens de faire passer des
                informations d'une page PHP à l'autre, ce qui est un besoin fréquent lorsqu'on crée un site Web.</p>
            <h2 id="transmissionData">F - <code>htmlspecialchars</code> et la transmission de données et sécurité</h2>
            <section>
                <p>Qu'elles soient issues de l'URL (<code>$_GET</code>) ou d'un formulaire (<code>$_POST</code>), il
                    faut garder à l'esprit que les données reçues par une page PHP sont saisies par l'utilisateur, ce
                    qui peut constituer une menace pour la sécurité du site. Rien n'empêche un utilisateur malveillant
                    de saisir des données de manière à provoquer un comportement inattendu du site Web. C'est ce que
                    l'on appelle <strong>l'injection de code</strong>.</p>
                <p>Pour se prémunir contre ces risques, il faut appliquer un principe très important : <strong>ne jamais
                    faire confiance aux données de l'utilisateur</strong>. Un développeur Web qui suppose que ses
                    utilisateurs saisiront uniquement des informations appropriées et n'effectue aucun contrôle sur ces
                    saisies prend le risque d'exposer son site à des attaques très faciles à réaliser.</p>
                <p>Il existe deux principaux types d'injection de code :</p>
                <ul>
                    <li>L'injection JavaScript dans une page HTML, appelé parfois <a target="_blank"
                                                                                     href="https://fr.wikipedia.org/wiki/Cross-site_scripting">XSS</a>
                        (<em>Cross-Site Scripting</em>).
                    </li>
                    <li>L'injection SQL dans une base données, dont nous parlerons dans un prochain chapitre.</li>
                </ul>
                <p>Pour réaliser une injection de code JavaScript, un utilisateur va saisir un morceau de code
                    JavaScript au lieu d'une valeur "normale".</p>
                <figure class="highlight">
                    <pre><code class="language-php" data-lang="php"><span class="nt">&lt;script </span><span class="na">type=</span><span
                            class="s">"text/javascript"</span><span class="nt">&gt;</span>alert('Miaou !')<span
                            class="nt">&lt;/script&gt; </span></code></pre>
                </figure>
                <p>Si la valeur saisie est directement affichée par la page PHP, le résultat HTML généré contiendra un
                    script JavaScript imprévu qui sera exécuté par le navigateur client. Cela peut potentiellement
                    causer de gros problèmes de sécurité.</p>
                <p>Un premier niveau de sécurité, qui doit devenir un réflexe, consiste à "nettoyer" toute donnée
                    externe avant de l'utiliser pour générer une page Web. Il existe plusieurs fonctions PHP qui
                    limitent fortement le risque d'injection de code JavaScript. Le choix le plus fréquent est la
                    fonction <code>htmlspecialchars</code>. Cette fonction remplace certains caractères spéciaux par des
                    entités HTML. Par exemple, le caractère <code>&lt;</code> est remplacé par <code>&amp;lt;</code>.
                    Cela permet de désactiver l'exécution du code contenu dans des balises <code>&lt;script&gt;</code>.
                </p>
                <p>On peut intégrer l'appel à <code>htmlspecialchars</code> dans une fonction <code>escape</code>.</p>
                <figure class="highlight"><pre><code class="language-php" data-lang="php"><span
                        class="s">&lt;?php</span>
<span class="c">/**
 * Nettoie une valeur insérée dans une page HTML
 * Doit être utilisée à chaque insertion de données dynamique dans une page HTML
 * Permet d'éviter les problèmes d'exécution de code indésirable (XSS)
 * @param string $valeur Valeur à nettoyer
 * @return string Valeur nettoyée
 */</span>
<span class="s">function</span> escape($valeur)
{
    <span class="c">// Convertit les caractères spéciaux en entités HTML</span>
    <span class="s">return htmlspecialchars</span>($valeur, ENT_QUOTES, 'UTF-8', false);
}
<span class="s">?&gt;</span></code></pre>
                </figure>
                <p>Il faut toujours penser à utiliser cette fonction lors de l'insertion de données externes dans une
                    page Web.</p>
                <figure class="highlight"><pre><code class="language-php" data-lang="php">$prenom = <span class="s">$_GET</span>['prenom']
$nom = <span class="s">$_GET</span>['nom']
<span class="s">echo</span>'Bienvenue ' <span class="s">.</span> <span class="s">escape</span>($prenom) <span class="s">.</span> ' ' <span
                            class="s">.</span> <span class="s">escape</span>($nom) <span class="s">.</span> ' !';               </code></pre>
                </figure>
            </section>

        </main>
    </div>
</div>
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
<!--<script src="../js/jquery-3.3.1.slim.min.js"></script>-->
<!--<script src="../js/popper.min.js"></script>-->
<!--<script src="../js/bootstrap.min.js"></script>-->
<script src="../js/docs.min.js"></script>
</body>
</html>