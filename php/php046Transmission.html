<!doctype html>
<html lang="fr">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="../dist/5.0/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="../dist/5.0/css/docs.css" rel="stylesheet">

    <title>PHP - transmettre des données</title>

</head>
<body>

<!--        navbar-->
<header class="navbar navbar-expand-md navbar-dark bd-navbar bg-success">
    <nav class="container-xxl flex-wrap flex-md-nowrap" aria-label="Main navigation">
        <div class="collapse navbar-collapse" id="bdNavbar">
            <ul class="navbar-nav flex-row flex-wrap bd-navbar-nav pt-2 py-md-0">
                <li class="nav-item">
                    <a class="nav-link " href="php01Gintroduction.html">Guide PHP</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="index.html">Documentation</a>
                </li>
            </ul>
        </div>
    </nav>
</header>
<nav class="bd-subnavbar py-2" aria-label="Secondary navigation"></nav>
<div class="container-xxl my-md-4 bd-layout">
    <!--        Menu Gauche-->
    <aside class="bd-sidebar">
        <nav class="collapse bd-links" id="bd-docs-nav" aria-label="Docs navigation">
            <ul class="list-unstyled mb-0 py-3 pt-md-1">
                <li class="mb-1">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start justify-content-start"
                            data-bs-toggle="collapse" data-bs-target="#php01Gintroduction" aria-expanded="false">
                        I - Introduction au développement Web
                    </button>
                    <div class="collapse" id="php01Gintroduction">
                        <ul class="list-unstyled fw-normal pb-1 small">
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php01Gintroduction.html#foncweb">
                                    A - Le fonctionnement du Web
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php01Gintroduction.html#protocole-HTTP">
                                    B - Le protocole HTTP
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php01Gintroduction.html#siteDyn">C - L'évolution vers des sites dynamiques
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="mb-1">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start"
                            data-bs-toggle="collapse" data-bs-target="#php02Gbaseslg" aria-expanded="false">
                        II - Les bases du langage
                    </button>
                    <div class="collapse" id="php02Gbaseslg">

                        <ul class="list-unstyled fw-normal pb-1 small">
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php02Gbaseslg.html">Les bases du langage
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="mb-1">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start"
                            data-bs-toggle="collapse" data-bs-target="#php031ProgPhp_Variables" aria-expanded="false">
                        III - Programmer avec PHP
                    </button>
                    <div class="collapse" id="php031ProgPhp_Variables">

                        <ul class="list-unstyled fw-normal pb-1 small">
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php031ProgPhp_Variables.html">A - Les variables
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php032ProgPhp_Tests.html">B - Tests et conditions
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php033ProgPhp_Tableaux.html">C - Les tableaux
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php034ProgPhp_Boucles.html">D - Les boucles
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php035ProgPhp_Fonctions.html"> E - Les fonctions
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php036ProgPhp_Raccourcis.html"> F - Les raccourcis
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="mb-1 active">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start"
                            data-bs-toggle="collapse" data-bs-target="#php041Transmission" aria-expanded="true"
                            aria-current="true">
                        IV - Transmettre des données entre des pages
                    </button>
                    <div class="collapse show" id="php041Transmission">

                        <ul class="list-unstyled fw-normal pb-1 small">
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php041Transmission.html">A - Notion de variable superglobale
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php042Transmission.html">B - Notion de formulaire
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php043Transmission.html">C - $_GET et la transmission via l'URL
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php044Transmission.html">D - $_POST et la transmission via un formulaire
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php045Transmission.html">E - $_SESSION et la transmission via la session
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded active"
                                   href="php046Transmission.html">F - htmlspecialchars et la transmission de données
                                    et sécurité
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="mb-1">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start"
                            data-bs-toggle="collapse" data-bs-target="#php05AccesSGBD_Introduction"
                            aria-expanded="false">
                        V - Accéder à une base de données
                    </button>
                    <div class="collapse" id="php05AccesSGBD_Introduction">

                        <ul class="list-unstyled fw-normal pb-1 small">
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php05AccesSGBD_Introduction.html"> A - Introduction
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php05AccesSGBD_Connexion.html">B - Connexion à la base de données
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php05AccesSGBD_RappelSQL.html">C - Rappel SQL avec SELECT
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php05AccesSGBD_RqtSimple.html">D - query - Requêtes simples
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php05AccesSGBD_RqtParam.html">E - prepare et execute - Requêtes avec paramètres
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php05AccesSGBD_RqtLMD.html">F - Le cas particulier avec INSERT, UPDATE,
                                    DELETE et exec</a>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
        </nav>
    </aside>
    <main class="bd-main order-1">
        <!--            Titre-->
        <div class="bd-intro ps-lg-4">
            <div class="d-md-flex flex-md-row align-items-center justify-content-between">
                <h1 class="bd-title" id="content">IV - Transmettre des données entre des pages</h1>
            </div>
            <p class="bd-lead">L'objectif de ce chapitre est de connaître les différents moyens de faire passer des
                informations d'une page PHP à l'autre, ce qui est un besoin fréquent lorsqu'on crée un site Web.</p>
        </div>
        <!--        Menu droite-->
        <div class="bd-toc mt-4 mb-5 my-md-0 ps-xl-3 mb-lg-5 text-muted">
            <strong class="d-block h6 my-2 pb-2 border-bottom">Dans cette page</strong>
            <nav id="TableOfContents">
            </nav>
        </div>

        <!--            Docs-->
        <div class="bd-content ps-lg-4">
            <h2 id="transmissionData">F - <code>htmlspecialchars</code> et la transmission de données et sécurité</h2>
            <section>
                <p>Qu'elles soient issues de l'URL (<code>$_GET</code>) ou d'un formulaire (<code>$_POST</code>), il
                    faut garder à l'esprit que les données reçues par une page PHP sont saisies par l'utilisateur, ce
                    qui peut constituer une menace pour la sécurité du site. Rien n'empêche un utilisateur malveillant
                    de saisir des données de manière à provoquer un comportement inattendu du site Web. C'est ce que
                    l'on appelle <strong>l'injection de code</strong>.</p>
                <p>Pour se prémunir contre ces risques, il faut appliquer un principe très important : <strong>ne jamais
                    faire confiance aux données de l'utilisateur</strong>. Un développeur Web qui suppose que ses
                    utilisateurs saisiront uniquement des informations appropriées et n'effectue aucun contrôle sur ces
                    saisies prend le risque d'exposer son site à des attaques très faciles à réaliser.</p>
                <p>Il existe deux principaux types d'injection de code :</p>
                <ul>
                    <li>L'injection JavaScript dans une page HTML, appelé parfois <a target="_blank"
                                                                                     href="https://fr.wikipedia.org/wiki/Cross-site_scripting">XSS</a>
                        (<em>Cross-Site Scripting</em>).
                    </li>
                    <li>L'injection SQL dans une base données, dont nous parlerons dans un prochain chapitre.</li>
                </ul>
                <p>Pour réaliser une injection de code JavaScript, un utilisateur va saisir un morceau de code
                    JavaScript au lieu d'une valeur "normale".</p>
                <div class="highlight">
                    <pre><code class="language-php" data-lang="php"><span class="nt">&lt;script </span><span class="na">type=</span><span
                            class="s">"text/javascript"</span><span class="nt">&gt;</span>alert('Miaou !')<span
                            class="nt">&lt;/script&gt; </span></code></pre>
                </div>
                <p>Si la valeur saisie est directement affichée par la page PHP, le résultat HTML généré contiendra un
                    script JavaScript imprévu qui sera exécuté par le navigateur client. Cela peut potentiellement
                    causer de gros problèmes de sécurité.</p>
                <p>Un premier niveau de sécurité, qui doit devenir un réflexe, consiste à "nettoyer" toute donnée
                    externe avant de l'utiliser pour générer une page Web. Il existe plusieurs fonctions PHP qui
                    limitent fortement le risque d'injection de code JavaScript. Le choix le plus fréquent est la
                    fonction <code>htmlspecialchars</code>. Cette fonction remplace certains caractères spéciaux par des
                    entités HTML. Par exemple, le caractère <code>&lt;</code> est remplacé par <code>&amp;lt;</code>.
                    Cela permet de désactiver l'exécution du code contenu dans des balises <code>&lt;script&gt;</code>.
                </p>
                <p>On peut intégrer l'appel à <code>htmlspecialchars</code> dans une fonction <code>escape</code>.</p>
                <div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span
                        class="s">&lt;?php</span>
<span class="c">/**
 * Nettoie une valeur insérée dans une page HTML
 * Doit être utilisée à chaque insertion de données dynamique dans une page HTML
 * Permet d'éviter les problèmes d'exécution de code indésirable (XSS)
 * @param string $valeur Valeur à nettoyer
 * @return string Valeur nettoyée
 */</span>
<span class="s">function</span> escape($valeur)
{
    <span class="c">// Convertit les caractères spéciaux en entités HTML</span>
    <span class="s">return htmlspecialchars</span>($valeur, ENT_QUOTES, 'UTF-8', false);
}
<span class="s">?&gt;</span></code></pre>
                </div>
                <p>Il faut toujours penser à utiliser cette fonction lors de l'insertion de données externes dans une
                    page Web.</p>
                <div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php">$prenom = <span
                        class="s">$_GET</span>['prenom']
$nom = <span class="s">$_GET</span>['nom']
<span class="s">echo</span>'Bienvenue ' <span class="s">.</span> <span class="s">escape</span>($prenom) <span class="s">.</span> ' ' <span
                            class="s">.</span> <span class="s">escape</span>($nom) <span class="s">.</span> ' !';               </code></pre>
                </div>
            </section>
        </div>
    </main>
</div>
<script src="../dist/5.0/js/bootstrap.bundle.min.js"></script>
<script src="../dist/5.0/js/docs.min.js"></script>
</body>
</html>