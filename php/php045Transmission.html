<!doctype html>
<html lang="fr">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="../dist/5.0/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="../dist/5.0/css/docs.css" rel="stylesheet">

    <title>PHP - transmettre des données</title>

</head>
<body>

<!--        navbar-->
<header class="navbar navbar-expand-md navbar-dark bd-navbar bg-success">
    <nav class="container-xxl flex-wrap flex-md-nowrap" aria-label="Main navigation">
        <div class="collapse navbar-collapse" id="bdNavbar">
            <ul class="navbar-nav flex-row flex-wrap bd-navbar-nav pt-2 py-md-0">
                <li class="nav-item">
                    <a class="nav-link " href="php01Gintroduction.html">Guide PHP</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="index.html">Documentation</a>
                </li>
            </ul>
        </div>
    </nav>
</header>
<nav class="bd-subnavbar py-2" aria-label="Secondary navigation"></nav>
<div class="container-xxl my-md-4 bd-layout">
    <!--        Menu Gauche-->
    <aside class="bd-sidebar">
        <nav class="collapse bd-links" id="bd-docs-nav" aria-label="Docs navigation">
            <ul class="list-unstyled mb-0 py-3 pt-md-1">
                <li class="mb-1">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start justify-content-start"
                            data-bs-toggle="collapse" data-bs-target="#php01Gintroduction" aria-expanded="false">
                        I - Introduction au développement Web
                    </button>
                    <div class="collapse" id="php01Gintroduction">
                        <ul class="list-unstyled fw-normal pb-1 small">
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php01Gintroduction.html#foncweb">
                                    A - Le fonctionnement du Web
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php01Gintroduction.html#protocole-HTTP">
                                    B - Le protocole HTTP
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php01Gintroduction.html#siteDyn">C - L'évolution vers des sites dynamiques
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="mb-1">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start"
                            data-bs-toggle="collapse" data-bs-target="#php02Gbaseslg" aria-expanded="false">
                        II - Les bases du langage
                    </button>
                    <div class="collapse" id="php02Gbaseslg">

                        <ul class="list-unstyled fw-normal pb-1 small">
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php02Gbaseslg.html">Les bases du langage
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="mb-1">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start"
                            data-bs-toggle="collapse" data-bs-target="#php031ProgPhp_Variables" aria-expanded="false">
                        III - Programmer avec PHP
                    </button>
                    <div class="collapse" id="php031ProgPhp_Variables">

                        <ul class="list-unstyled fw-normal pb-1 small">
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php031ProgPhp_Variables.html">A - Les variables
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php032ProgPhp_Tests.html">B - Tests et conditions
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php033ProgPhp_Tableaux.html">C - Les tableaux
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php034ProgPhp_Boucles.html">D - Les boucles
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php035ProgPhp_Fonctions.html"> E - Les fonctions
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php036ProgPhp_Raccourcis.html"> F - Les raccourcis
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="mb-1 active">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start"
                            data-bs-toggle="collapse" data-bs-target="#php041Transmission" aria-expanded="true"
                            aria-current="true">
                        IV - Transmettre des données entre des pages
                    </button>
                    <div class="collapse show" id="php041Transmission">

                        <ul class="list-unstyled fw-normal pb-1 small">
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php041Transmission.html">A - Notion de variable superglobale
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php042Transmission.html">B - Notion de formulaire
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php043Transmission.html">C - $_GET et la transmission via l'URL
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php044Transmission.html">D - $_POST et la transmission via un formulaire
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded active"
                                   href="php045Transmission.html">E - $_SESSION et la transmission via la session
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php046Transmission.html">F - htmlspecialchars et la transmission de données
                                    et sécurité
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="mb-1">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start"
                            data-bs-toggle="collapse" data-bs-target="#php05AccesSGBD_Introduction"
                            aria-expanded="false">
                        V - Accéder à une base de données
                    </button>
                    <div class="collapse" id="php05AccesSGBD_Introduction">

                        <ul class="list-unstyled fw-normal pb-1 small">
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php05AccesSGBD_Introduction.html"> A - Introduction
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php05AccesSGBD_Connexion.html">B - Connexion à la base de données
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php05AccesSGBD_RappelSQL.html">C - Rappel SQL avec SELECT
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php05AccesSGBD_RqtSimple.html">D - query - Requêtes simples
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php05AccesSGBD_RqtParam.html">E - prepare et execute - Requêtes avec paramètres
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php05AccesSGBD_RqtLMD.html">F - Le cas particulier avec INSERT, UPDATE,
                                    DELETE et exec</a>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
        </nav>
    </aside>
    <main class="bd-main order-1">
        <!--            Titre-->
        <div class="bd-intro ps-lg-4">
            <div class="d-md-flex flex-md-row align-items-center justify-content-between">
                <h1 class="bd-title" id="content">IV - Transmettre des données entre des pages</h1>
            </div>
            <p class="bd-lead">L'objectif de ce chapitre est de connaître les différents moyens de faire passer des
                informations d'une page PHP à l'autre, ce qui est un besoin fréquent lorsqu'on crée un site Web.</p>
        </div>
        <!--        Menu droite-->
        <div class="bd-toc mt-4 mb-5 my-md-0 ps-xl-3 mb-lg-5 text-muted">
            <strong class="d-block h6 my-2 pb-2 border-bottom">Dans cette page</strong>
            <nav id="TableOfContents">
                <ul>
                    <li><a href="#transmissionSessionCreation">1 - Création d'une session</a></li>
                    <li><a href="#transmissionSessionVariable">2 - Définition de variables de
                        session</a></li>
                    <li><a href="#transmissionSessionVariableUtilisation">3 - Utilisation de
                        variables de session</a></li>
                    <li><a href="#transmissionSessionDestruct">4- Destruction d'une session</a>
                    </li>
                    <li><a href="#transmissionSessionUtil">5 - Utilité des sessions</a></li>
                </ul>
            </nav>
        </div>

        <!--            Docs-->
        <div class="bd-content ps-lg-4">
            <h2 id="transmissionSession">E - <code>$_SESSION</code> et la transmission via la session</h2>
            <section>
                <p>De par sa nature, HTTP est <strong>sans état</strong>. Vous vous connectez à un site Web, le serveur
                    vous donne un fichier. Comme vous l'avez déjà vu, vous pouvez envoyer des données du navigateur au
                    serveur à l'aide de variables <code>GET</code> et de formulaires HTML. Cependant, les informations
                    sont fournies sur une seule
                    page et ne sont disponibles que lorsque le navigateur fournit <code>GET</code> (ou <code>POST</code>)
                    des variables. </p>
                <p>Pour un système de connexion, l'utilisateur devra envoyer une fois son nom d'utilisateur et son mot
                    de passe au serveur, puis conserver un état «connecté» à chaque demande de page suivante.
                    Bien que ces informations puissent être envoyées via des paramètres d'URL ou des formulaires HTML,
                    elles devraient être fournies à chaque page. Du point de vue de l'utilisateur, saisir son nom
                    d'utilisateur et son mot de passe chaque fois qu'il visite une page différente prend du temps et est
                    inefficace.
                    <br>Deux technologies, les cookies et les sessions , peuvent être utilisées pour stocker des
                    informations sur un utilisateur particulier entre les pages.
                    <br>Les cookies et les sessions sont deux de ces technologies mystérieuses qui sont presque toujours
                    considérées comme plus intimidantes et complexes qu'elles ne le sont en réalité. Dans ce chapitre,
                    nous n'allons traiter que les <code>sessions</code>, je vais démystifier ces mythes en expliquant
                    dans un langage simple ce qu'ils sont, comment elle
                    fonctionnent et ce qu'elle peut faire pour vous.
                </p>
                <p>Les sessions ont été développées en PHP comme solution à ce problème. Au lieu de stocker toutes nos
                    données (éventuellement volumineuses) sous forme de cookies dans le navigateur Web de nos visiteurs,
                    les
                    sessions nous permettent de stocker les données sur notre serveur Web. La seule valeur stockée dans
                    le
                    navigateur est un cookie unique contenant l'<strong>ID de session</strong> de l'utilisateur, une
                    longue chaîne de
                    lettres et de chiffres qui sert à identifier cet utilisateur de manière unique pendant la durée de
                    sa
                    visite sur notre site. C'est une variable pour laquelle PHP surveille les requêtes de page suivantes
                    et
                    utilise pour charger les données stockées associées à cette session.</p>
                <h3 id="transmissionSessionCreation">1 - Création d'une session</h3>
                <article>
                    <p>La création d'une nouvelle session s'effectue en appelant la fonction <code>session_start</code>.
                    </p>
                    <div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span
                            class="s">session_start</span>();
<span class="c">// ...</span></code></pre>
                    </div>
                    <div class="bd-callout bd-callout-warning">
                        <h4>Attention</h4>
                        <p>Cette fonction doit obligatoirement être appelée au tout début de la page, avant tout code
                            HTML.</p>
                    </div>
                </article>
                <h3 id="transmissionSessionVariable">2 - Définition de variables de session</h3>
                <article>
                    <p>Une fois la session créée, on peut y ajouter de nouvelles variables identifiées par leur nom.</p>
                    <div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span
                            class="s">$_SESSION</span>['prenom'] = 'Baptiste';
<span class="s">$_SESSION</span>['age'] = 39;</code></pre>
                    </div>
                </article>
                <h3 id="transmissionSessionVariableUtilisation">3 - Utilisation de variables de session</h3>
                <article>
                    <p>Dans n'importe quelle page où la fonction <code>session_start</code> a été appelée, on peut
                        utiliser
                        <code>$_SESSION</code> pour accéder aux valeurs des variables de session. Il est prudent de
                        vérifier
                        au préalable que la variable existe, grâce à la fonction <code>isset</code>.</p>
                    <div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span
                            class="s">if</span>(<span class="s">isset</span>(<span class="s">$_SESSION</span>['age'] &amp;&amp; <span
                            class="s">isset</span>(<span class="s">$_SESSION</span>['prenom']) {
    <span class="s">echo</span>'Je te connais toujours ! Tu es ' <span class="s">.</span> <span
                                class="s">$_SESSION</span>['prenom'] <span class="s">.</span> ' et tu as ' <span
                                class="s">.</span> <span class="s">$_SESSION</span>['age'] <span class="s">.</span> ' ans.';
<span class="s">else</span>{
    <span class="s">echo</span>"Je ne te connais pas...";
}</code></pre>
                    </div>
                    <p>Cette verification doit se faire à chaque page. Dans la cadre du pattern MVC, elle se fera dans
                        le contrôleur.</p>
                </article>
                <h3 id="transmissionSessionDestruct">4- Destruction d'une session</h3>
                <article>
                    <p>En fin de visite, la destruction explicite d'une session se fait grâce à la fonction <code>session_destroy</code>.
                        Après l'appel, la variable <code>$_SESSION</code> n'est plus utilisable.</p>
                    <div class="bd-callout bd-callout-info">
                        <h4>Rappel</h4>
                        <p>Cette destruction est automatique au bout d'un certain temps d'inactivité.</p>
                    </div>
                </article>
                <h3 id="transmissionSessionUtil">5 - Utilité des sessions</h3>
                <article>
                    <p>Un cas d'utilisation très fréquent des sessions est l'authentification d'un utilisateur par
                        login/mot
                        de passe. En utilisant une session pour mémoriser ces paramètres, on peut "reconnaître"
                        l'utilisateur sur toutes les pages du site, mais aussi restreindre certaines zones aux
                        utilisateurs
                        authentifiés : si la variable de session associée au login existe, on affiche le contenu, sinon
                        on
                        affiche une erreur.</p>
                </article>
            </section>
        </div>
    </main>
</div>
<script src="../dist/5.0/js/bootstrap.bundle.min.js"></script>
<script src="../dist/5.0/js/docs.min.js"></script>
</body>
</html>