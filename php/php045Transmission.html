<!doctype html>
<html lang="fr">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
          integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <!--    <link href="../dist/css/bootstrap.min.css" rel="stylesheet" media="screen">-->
    <link href="../dist/css/bootstrap4-modif.css" rel="stylesheet" media="screen">
    <link href="../dist/css/docs.min.css" rel="stylesheet">
    <link href="../dist/css/docs.perso.css" rel="stylesheet">
    <title>PHP - transmettre des données</title>
    <script>
        /*        window.ga = window.ga || function () {
                    (ga.q = ga.q || []).push(arguments)
                };
                ga.l = +new Date;
                ga('create', 'UA-146052-10', 'chchabin.free.fr');
                ga('set', 'anonymizeIp', true);
                ga('send', 'pageview');*/
    </script>
</head>
<body>
<a class="skippy sr-only sr-only-focusable" href="#content">
    <span class="skippy-text">Skip to main content</span>
</a>
<!--        navbar-->
<header class="navbar navbar-expand navbar-dark flex-column flex-md-row bd-navbar">
    <a class="navbar-brand mr-0 mr-md-2" href="/" aria-label="Bootstrap">

    </a>

    <div class="navbar-nav-scroll">
        <ul class="navbar-nav bd-navbar-nav flex-row">
            <li class="nav-item">
                <a class="nav-link " href="php01Gintroduction.html"
                   onclick="ga('send', 'event', 'Navbar', 'Community links', 'Bootstrap');">Guide PHP</a>
            </li>
            <li class="nav-item">
                <a class="nav-link active" href="index.html"
                   onclick="ga('send', 'event', 'Navbar', 'Community links', 'Docs');">Documentation</a>
            </li>
        </ul>
    </div>
</header>
<div class="container-fluid">
    <div class="row flex-xl-nowrap">
        <!--        Menu Gauche-->
        <div class="col-12 col-md-3 col-xl-2 bd-sidebar">
            <nav class="collapse bd-links" id="bd-docs-nav">
                <div class="bd-toc-item">
                    <a class="bd-toc-link " href="php01Gintroduction.html">
                        I - Introduction au développement Web
                    </a>

                    <ul class="nav bd-sidenav">
                        <li>
                            <a href="#foncweb">
                                A - Le fonctionnement du Web
                            </a>
                        </li>
                        <li>
                            <a href="#protocole-HTTP">
                                B - Le protocole HTTP
                            </a>
                        </li>
                        <li>
                            <a href="#siteDyn">C - L'évolution vers des sites dynamiques
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="bd-toc-item ">
                    <a class="bd-toc-link" href="php02Gbaseslg.html">
                        II - Les bases du langage
                    </a>
                </div>
                <div class="bd-toc-item">
                    <a class="bd-toc-link" href="php031ProgPhp_Variables.html">
                        III - Programmer avec PHP
                    </a>

                    <ul class="nav bd-sidenav">
                        <li>
                            <a href="#variables">A - Les variables
                            </a>
                        </li>
                        <li>
                            <a href="#tests">B - Tests et conditions
                            </a>
                        </li>
                        <li>
                            <a href="#tableau">C - Les tableaux
                            </a>
                        </li>
                        <li>
                            <a href="#boucles">D - Les boucles
                            </a>
                        </li>
                        <li>
                            <a href="#fonctions"> E - Les fonctions
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="bd-toc-item active">
                    <a class="bd-toc-link" href="php041Transmission.html">
                        IV - Transmettre des données entre des pages
                    </a>

                    <ul class="nav bd-sidenav">
                        <li>
                            <a href="php041Transmission.html">A - Notion de variable superglobale
                            </a>
                        </li>
                        <li>
                            <a href="php042Transmission.html">B - Notion de formulaire
                            </a>
                        </li>
                        <li>
                            <a href="php043Transmission.html">C - <code>$_GET</code> et la transmission via l'URL
                            </a>
                        </li>
                        <li>
                            <a href="php044Transmission.html">D - <code>$_POST</code> et la transmission via un formulaire
                            </a>
                        </li>
                        <li>
                            <a href="php045Transmission.html">E - <code>$_SESSION</code> et la transmission via la session
                            </a>
                        </li>
                        <li>
                            <a href="php046Transmission.html">F - <code>htmlspecialchars</code> et la transmission de données
                                et sécurité
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="bd-toc-item">
                    <a class="bd-toc-link" href="php05AccesSGBD_Introduction.html">
                        V - Accéder à une base de données
                    </a>

                    <ul class="nav bd-sidenav">
                        <li>
                            <a href="#sgbdIntro"> A - Introduction
                            </a>
                        </li>
                        <li>
                            <a href="#sgbdConect">B - Connexion à la base de données
                            </a>
                        </li>
                        <li>
                            <a href="#sgbdRequete">C - Exécution de requêtes SQL
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
        <!--        Menu droite-->
        <div class="d-none d-xl-block col-xl-2 bd-toc">
            <ul class="section-nav">
                <li class="toc-entry toc-h2"><a href="#transmissionSessionCreation">1 - Création d'une session</a></li>
                <li class="toc-entry toc-h2"><a href="#transmissionSessionVariable">2 - Définition de variables de
                    session</a></li>
                <li class="toc-entry toc-h2"><a href="#transmissionSessionVariableUtilisation">3 - Utilisation de
                    variables de session</a></li>
                <li class="toc-entry toc-h2"><a href="#transmissionSessionDestruct">4- Destruction d'une session</a>
                </li>
                <li class="toc-entry toc-h2"><a href="#transmissionSessionUtil">5 - Utilité des sessions</a></li>
            </ul>
        </div>
        <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content" role="main">
            <h1 class="bd-title" id="content">IV - Transmettre des données entre des pages</h1>
            <p class="bd-lead">L'objectif de ce chapitre est de connaître les différents moyens de faire passer des
                informations d'une page PHP à l'autre, ce qui est un besoin fréquent lorsqu'on crée un site Web.</p>
            <h2 id="transmissionSession">E - <code>$_SESSION</code> et la transmission via la session</h2>
            <section>
            <p>De par sa nature, HTTP est <strong>sans état</strong>. Vous vous connectez à un site Web, le serveur
                vous donne un fichier. Comme vous l'avez déjà vu, vous pouvez envoyer des données du navigateur au
                serveur à l'aide de variables <code>GET</code> et de formulaires HTML. Cependant, les informations
                sont fournies sur une seule
                page et ne sont disponibles que lorsque le navigateur fournit <code>GET</code> (ou <code>POST</code>)
                des variables. </p>
            <p>Pour un système de connexion, l'utilisateur devra envoyer une fois son nom d'utilisateur et son mot
                de passe au serveur, puis conserver un état «connecté» à chaque demande de page suivante.
                Bien que ces informations puissent être envoyées via des paramètres d'URL ou des formulaires HTML,
                elles devraient être fournies à chaque page. Du point de vue de l'utilisateur, saisir son nom
                d'utilisateur et son mot de passe chaque fois qu'il visite une page différente prend du temps et est
                inefficace.
                <br>Deux technologies, les cookies et les sessions , peuvent être utilisées pour stocker des
                informations sur un utilisateur particulier entre les pages.
                <br>Les cookies et les sessions sont deux de ces technologies mystérieuses qui sont presque toujours
                considérées comme plus intimidantes et complexes qu'elles ne le sont en réalité. Dans ce chapitre,
                nous n'allons traiter que les <code>sessions</code>, je vais démystifier ces mythes en expliquant
                dans un langage simple ce qu'ils sont, comment elle
                fonctionnent et ce qu'elle peut faire pour vous.
            </p>
            <p>Les sessions ont été développées en PHP comme solution à ce problème. Au lieu de stocker toutes nos
                données (éventuellement volumineuses) sous forme de cookies dans le navigateur Web de nos visiteurs, les
                sessions nous permettent de stocker les données sur notre serveur Web. La seule valeur stockée dans le
                navigateur est un cookie unique contenant l'<strong>ID de session</strong> de l'utilisateur, une longue chaîne de
                lettres et de chiffres qui sert à identifier cet utilisateur de manière unique pendant la durée de sa
                visite sur notre site. C'est une variable pour laquelle PHP surveille les requêtes de page suivantes et
                utilise pour charger les données stockées associées à cette session.</p>
            <h3 id="transmissionSessionCreation">1 - Création d'une session</h3>
            <article>
                <p>La création d'une nouvelle session s'effectue en appelant la fonction <code>session_start</code>.
                </p>
                <figure class="highlight"><pre><code class="language-php" data-lang="php"><span
                        class="s">session_start</span>();
<span class="c">// ...</span></code></pre>
                </figure>
                <div class="bd-callout bd-callout-warning">
                    <h4>Attention</h4>
                    <p>Cette fonction doit obligatoirement être appelée au tout début de la page, avant tout code
                        HTML.</p>
                </div>
            </article>
            <h3 id="transmissionSessionVariable">2 - Définition de variables de session</h3>
            <article>
                <p>Une fois la session créée, on peut y ajouter de nouvelles variables identifiées par leur nom.</p>
                <figure class="highlight"><pre><code class="language-php" data-lang="php"><span
                        class="s">$_SESSION</span>['prenom'] = 'Baptiste';
<span class="s">$_SESSION</span>['age'] = 39;</code></pre>
                </figure>
            </article>
                <h3 id="transmissionSessionVariableUtilisation">3 - Utilisation de variables de session</h3>
                <article>
                <p>Dans n'importe quelle page où la fonction <code>session_start</code> a été appelée, on peut
                    utiliser
                    <code>$_SESSION</code> pour accéder aux valeurs des variables de session. Il est prudent de
                    vérifier
                    au préalable que la variable existe, grâce à la fonction <code>isset</code>.</p>
                <figure class="highlight"><pre><code class="language-php" data-lang="php"><span
                        class="s">if</span>(<span class="s">isset</span>(<span class="s">$_SESSION</span>['age'] &amp;&amp; <span
                        class="s">isset</span>(<span class="s">$_SESSION</span>['prenom']) {
    <span class="s">echo</span>'Je te connais toujours ! Tu es ' <span class="s">.</span> <span
                            class="s">$_SESSION</span>['prenom'] <span class="s">.</span> ' et tu as ' <span
                            class="s">.</span> <span class="s">$_SESSION</span>['age'] <span class="s">.</span> ' ans.';
<span class="s">else</span>{
    <span class="s">echo</span>"Je ne te connais pas...";
}</code></pre>
                </figure>
                    <p>Cette verification doit se faire à chaque page. Dans la cadre du pattern MVC, elle se fera dans le contrôleur.</p>
            </article>
            <h3 id="transmissionSessionDestruct">4- Destruction d'une session</h3>
            <article>
                <p>En fin de visite, la destruction explicite d'une session se fait grâce à la fonction <code>session_destroy</code>.
                    Après l'appel, la variable <code>$_SESSION</code> n'est plus utilisable.</p>
                <div class="bd-callout bd-callout-info">
                    <h4>Rappel</h4>
                    <p>Cette destruction est automatique au bout d'un certain temps d'inactivité.</p>
                </div>
            </article>
                <h3 id="transmissionSessionUtil">5 - Utilité des sessions</h3>
                <article>
                <p>Un cas d'utilisation très fréquent des sessions est l'authentification d'un utilisateur par
                    login/mot
                    de passe. En utilisant une session pour mémoriser ces paramètres, on peut "reconnaître"
                    l'utilisateur sur toutes les pages du site, mais aussi restreindre certaines zones aux
                    utilisateurs
                    authentifiés : si la variable de session associée au login existe, on affiche le contenu, sinon
                    on
                    affiche une erreur.</p>
            </article>
            </section>
        </main>
    </div>
</div>
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
<!--<script src="../js/jquery-3.3.1.slim.min.js"></script>-->
<!--<script src="../js/popper.min.js"></script>-->
<!--<script src="../js/bootstrap.min.js"></script>-->
<script src="../js/docs.min.js"></script>
</body>
</html>