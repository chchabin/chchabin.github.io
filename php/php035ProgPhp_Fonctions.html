<!doctype html>
<html lang="fr">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
          integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <!--    <link href="../dist/css/bootstrap.min.css" rel="stylesheet" media="screen">-->
    <link href="../dist/css/bootstrap4-modif.css" rel="stylesheet" media="screen">
    <link href="../dist/css/docs.min.css" rel="stylesheet">
    <link href="../dist/css/docs.perso.css" rel="stylesheet">
    <title>PHP - Programmer avec PHP</title>
    <script>
        /*       window.ga = window.ga || function () {
                   (ga.q = ga.q || []).push(arguments)
               };
               ga.l = +new Date;
               ga('create', 'UA-146052-10', 'chchabin.free.fr');
               ga('set', 'anonymizeIp', true);
               ga('send', 'pageview');*/
    </script>
</head>
<body>
<a class="skippy sr-only sr-only-focusable" href="#content">
    <span class="skippy-text">Skip to main content</span>
</a>
<!--        navbar-->
<header class="navbar navbar-expand navbar-dark flex-column flex-md-row bd-navbar">
    <a class="navbar-brand mr-0 mr-md-2" href="/" aria-label="Bootstrap">

    </a>

    <div class="navbar-nav-scroll">
        <ul class="navbar-nav bd-navbar-nav flex-row">
            <li class="nav-item">
                <a class="nav-link " href="php01Gintroduction.html"
                   onclick="ga('send', 'event', 'Navbar', 'Community links', 'Bootstrap');">Guide PHP</a>
            </li>
            <li class="nav-item">
                <a class="nav-link active" href="index.html"
                   onclick="ga('send', 'event', 'Navbar', 'Community links', 'Docs');">Documentation</a>
            </li>
        </ul>
    </div>
</header>
<div class="container-fluid">
    <div class="row flex-xl-nowrap">
        <!--        Menu Gauche-->
        <div class="col-12 col-md-3 col-xl-2 bd-sidebar">
            <nav class="collapse bd-links" id="bd-docs-nav">
                <div class="bd-toc-item">
                    <a class="bd-toc-link " href="php01Gintroduction.html">
                        I - Introduction au développement Web
                    </a>

                    <ul class="nav bd-sidenav">
                        <li>
                            <a href="#foncweb">
                                A - Le fonctionnement du Web
                            </a>
                        </li>
                        <li>
                            <a href="#protocole-HTTP">
                                B - Le protocole HTTP
                            </a>
                        </li>
                        <li>
                            <a href="#siteDyn">C - L'évolution vers des sites dynamiques
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="bd-toc-item ">
                    <a class="bd-toc-link" href="php02Gbaseslg.html">
                        II - Les bases du langage
                    </a>
                </div>
                <div class="bd-toc-item active">
                    <a class="bd-toc-link" href="php031ProgPhp_Variables.htm">
                        III - Programmer avec PHP
                    </a>

                    <ul class="nav bd-sidenav">
                        <li>
                            <a href="php031ProgPhp_Variables.html">A - Les variables
                            </a>
                        </li>
                        <li>
                            <a href="php032ProgPhp_Tests.html">B - Tests et conditions
                            </a>
                        </li>
                        <li>
                            <a href="php033ProgPhp_Tableaux.html">C - Les tableaux
                            </a>
                        </li>
                        <li>
                            <a href="php034ProgPhp_Boucles.html">D - Les boucles
                            </a>
                        </li>
                        <li>
                            <a href="php035ProgPhp_Fonctions.html"> E - Les fonctions
                            </a>
                        </li>
                        <li>
                            <a href="php036ProgPhp_Raccourcis.html"> F - Les raccourcis
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="bd-toc-item">
                    <a class="bd-toc-link" href="php041Transmission.html">
                        IV - Transmettre des données entre des pages
                    </a>

                    <ul class="nav bd-sidenav">
                        <li>
                            <a href="#superglobale">A - Notion de variable superglobale
                            </a>
                        </li>
                        <li>
                            <a href="#transmissionURL">B - Transmission via l'URL
                            </a>
                        </li>
                        <li>
                            <a href="#transmissionForm">C - Transmission via un formulaire
                            </a>
                        </li>
                        <li>
                            <a href="#transmissionData">D - Transmission de données et sécurité
                            </a>
                        </li>
                        <li>
                            <a href="#transmissionSession">E - Transmission via la session
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="bd-toc-item">
                    <a class="bd-toc-link" href="php05AccesSGBD_Introduction.html">
                        V - Accéder à une base de données
                    </a>

                    <ul class="nav bd-sidenav">
                        <li>
                            <a href="#sgbdIntro"> A - Introduction
                            </a>
                        </li>
                        <li>
                            <a href="#sgbdConect">B - Connexion à la base de données
                            </a>
                        </li>
                        <li>
                            <a href="#sgbdRequete">C - Exécution de requêtes SQL
                            </a>
                        </li>
                    </ul>
                </div>

            </nav>

        </div>
        <!--        Menu droite-->
        <div class="d-none d-xl-block col-xl-2 bd-toc">
            <ul class="section-nav">
                <li class="toc-entry toc-h2"><a href="#fonctionsUtilisation">1 - Utilisation de fonctions
                    prédéfinies</a></li>
                <li class="toc-entry toc-h2"><a href="#fonctionsEcrire">2 - Écriture de fonctions</a></li>
                <li class="toc-entry toc-h2"><a href="#fonctionsType">3 - Typage des fonctions</a></li>
                <li class="toc-entry toc-h2"><a href="#fonctionsPortee">4 - Portée des variables</a></li>
            </ul>
        </div>
        <!--        Page de cours-->
        <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content" role="main">
            <h1 class="bd-title" id="content">III - Programmer avec PHP</h1>
            <p>L'objectif de ce chapitre est de savoir utiliser les structures de bases de la programmation avec le
                langage PHP.</p>
            <h2 id="fonctions"> E - Les fonctions</h2>
            <section>
                <h3 id="fonctionsUtilisation">1 - Utilisation de fonctions prédéfinies</h3>
                <article>
                    <p>Une fonction est un code PHP que vous pouvez invoquer à volonté, où vous fournissez
                        généralement un ou plusieurs arguments à utiliser, et que vous recevez souvent une valeur de
                        retour en conséquence.</p>
                    <p>Les fonctions permettent de centraliser une portion de code utilisée régulièrement.</p>
                    <p>Vous pouvez utiliser la vaste bibliothèque de fonctions de PHP pour faire à peu près tout ce
                        qu'un script PHP pourrait être amené à faire, de la récupération de la date actuelle ( date ) à
                        la génération de graphiques à la volée . En voici quelques
                        exemples :</p>
                    <ul>
                        <li>
                            <code>count</code> permet de renvoyer la taille d'un tableau.
                        </li>
                        <li>
                            <code>date</code> renvoie une date/heure qu'on peut ensuite formater pour affichage.
                        </li>
                        <li>
                            <code>isset</code> vérifie si une variable existe ou non.
                        </li>
                        <li>
                            <code>strlen</code> renvoie le nombre de caractères d'une chaîne.
                        </li>
                    </ul>
                    <figure class="highlight"><pre><code class="language-php" data-lang="php"><span
                            class="s">&lt;?php</span>
$langages = <span class="s">array</span>('C#', 'PHP', 'HTML');
$nbLangages = <span class="s">count</span>($langages);
<span class="s">if</span> (<span class="s">isset</span>($a) == false){
    <span class="c">...</span>
}
$date = <span class="s">date</span>("d-m-Y H:i:s");
$msg = "Hello there";
$longueurMsg = <span class="s">strlen</span>($msg);
<span class="s">?&gt;</span></code></pre>
                    </figure>
                </article>
                <h3 id="fonctionsEcrire">2 - Écriture de fonctions</h3>
                <article>

                    <p>Les fonctions personnalisées, une fois définies, fonctionnent exactement comme les fonctions
                        intégrées de PHP et peuvent faire tout ce qu'un script PHP normal peut faire.
                        Cela permet de décomposer
                        un problème à résoudre en sous-parties plus simples, parfois réutilisables.</p>
                    <p>Lorsque qu'on a besoin d'utiliser une fonction, on effectue un appel à celle-ci. Cet appel
                        provoque un "branchement" vers la fonction, qui s'exécute. Une fois l'exécution de la fonction
                        terminée, le contrôle revient au niveau de l'appelant et l'exécution se poursuit.</p>
                    <p>Les paramètres utilisés dans la définition du sous-programme sont appelés paramètres formels. Au
                        moment de l'exécution, leur valeur devient celle des variables utilisés pour l'appel, appelées
                        paramètres effectifs ou encore arguments.</p>
                    <figure class="highlight"><pre><code class="language-php" data-lang="php"><span
                            class="s">&lt;?php</span>
<span class="c">// $a et $b sont les paramètres de la fonction</span>
<span class="s">function</span> multiplier($a, $b) {
    <span class="s">return</span> $a * $b;
}
$nb1 = 3;
$nb2 = 7.5;
<span class="c">// Appel de la fonction pour execution</span>
$resultat = multiplier($nb1, $nb2);<span class="c">// $nb1 et $nb2 sont les arguments de l'appel de la fonction</span>
<span class="c">// La variable $resultat vaut maintenant 22.5</span>
<span class="s">?&gt;</span></code></pre>
                    </figure>
                    <div class="bd-callout bd-callout-info">
                        <h4>Signature d'une fonction</h4>
                        <figure class="highlight">
                            <pre><code class="language-php" data-lang="php"><span class="s">function</span> multiplier($a, $b)</code></pre>
                        </figure>
                        <p>La première ligne de l'écriture de la fonction est appelé signature, comme l'exemple
                            précédent.</p>
                    </div>
                    <p>Le mot-clé <code>function</code> indique à PHP que nous souhaitons déclarer une nouvelle fonction
                        à utiliser
                        dans le script actuel. Ensuite, nous fournissons à la fonction un nom (dans ce cas, multiplier
                        ). Les
                        noms de fonctions fonctionnent selon les mêmes règles que les noms de variables - ils doivent
                        commencer par une lettre ou un trait de soulignement ( <code>_</code> ) et peuvent contenir des
                        lettres, des
                        chiffres et des traits de soulignement - sauf, bien sûr, qu'il n'y a pas de préfixe de signe
                        dollar. Au lieu de cela, les noms de fonction sont toujours suivis d'un ensemble de parenthèses
                        ( <code>()</code> ), qui peuvent ou non être vides.
                    </p>
                    <div class="bd-callout bd-callout-danger">
                        <h4>N'oubliez pas les parenthèses</h4>
                        <p>C'est une erreur courante des débutants d'oublier les parenthèses quand il n'y a pas
                            d'argument</p>
                    </div>
                    <p>
                        <br>Les parenthèses qui suivent un nom de fonction entourent la liste des arguments que la
                        fonction
                        acceptera. Vous devriez déjà vous familiariser avec cela grâce à votre expérience avec les
                        fonctions intégrées de PHP. Par exemple, lorsque vous utilisez rand pour générer un nombre
                        aléatoire, vous pouvez lui fournir un nombre minimum et maximum entre parenthèses.
                        Lors de la déclaration d'une fonction personnalisée, au lieu de donner une liste de valeurs pour
                        les arguments, vous donnez une liste de noms de variables. Dans cet exemple, nous listons deux
                        variables: $a et $b . Lorsque la fonction est appelée, elle s'attendra donc à recevoir
                        deux arguments. La valeur du premier argument sera affectée à $a , tandis que la valeur du
                        second sera affectée à $b. Ces variables peuvent ensuite être utilisées pour effectuer le
                        calcul dans la fonction.
                        <br>En parlant de calculs, le reste de la déclaration de fonction est le code qui effectue le
                        calcul, ou fait tout ce que la fonction est censée faire. Ce code doit être entouré d'un
                        ensemble d'accolades ( <code>{ … }</code> ), voici donc l'accolade ouvrante.
                        Vous pouvez considérer le code entre ces accolades comme un script PHP miniature. Cette fonction
                        est simple, car elle ne contient qu'une seule instruction : une instruction <code>return</code>.
                        Une instruction <code>return</code> peut être utilisée dans le code d'une fonction pour revenir
                        immédiatement
                        au script principal. Lorsque l'interpréteur PHP atteint une instruction <code>return</code>, il
                        arrête
                        immédiatement d'exécuter le code de cette fonction et retourne là où la fonction a été appelée.
                        C'est une sorte de siège éjectable pour les fonctions !
                        <br>En plus de sortir de la fonction, l'instruction <code>return</code> vous permet de spécifier
                        une valeur
                        pour
                        que la fonction retourne au code qui l'a appelée.
                        <br>L'accolade fermante marque la fin de la déclaration de fonction.
                        <br>L'écriture d'une fonction seule ne fait rien. Aucun code à l'intérieur de la fonction n'est
                        exécuté tant que la fonction n'est pas appelée.
                    </p>
                    <div class="bd-callout bd-callout-danger">
                        <h4>N'oubliez pas les arguments</h4>
                        <p>Sauf si vous l'avez spécifié dans la signature, les paramètres spécifiés dans l'écriture de
                            la fonction
                            sont obligatoire quand vous l'exécutez. </p>
                    </div>
                    <div class="bd-callout bd-callout-info">
                        <h4>Écriture de Fonctions</h4>
                        <p>Lorsque vous écrivez une fonction, il est généralement plus facile d'écrire des exemples de
                            la façon dont vous pensez qu'elle devrait être appelée avant d'écrire le code à l'intérieur
                            de la fonction elle-même. Cela vous donne une cible vers laquelle travailler et du code que
                            vous pouvez exécuter pour voir s'il fonctionne correctement ou non.</p>
                    </div>
                </article>
                <h3 id="fonctionsType">3 - Typage des fonctions</h3>
                <article>
                    <h4>déclarations du type d'argument</h4>
                    <p>Que se passe-t-il si la personne qui utilise votre fonction passe en paramètre des lettres au
                        lieu de chiffre ?
                        C'est une erreur innocente et facile à commettre par accident. Une erreur ne sera pas vue
                        jusqu'à ce que la fonctions
                        soit appelée.
                        <br>Pour les aider, il vaut mieux s'assurer que les arguments sont du bon type. PHP est mal
                        typé, ce qui signifie qu'une variable peut être de n'importe quel type, comme une chaîne, un
                        nombre, un tableau ou un objet. En les déclarant, vous pouvez appliquer des types lorsque vous
                        créez
                        une fonction. Ceci est particulièrement utile pour les constructeurs, où obtenir les arguments
                        dans le mauvais ordre semble fonctionner. Voici un exemple, avec le code suivant:</p>
                    <figure class="highlight"><pre><code class="language-php" data-lang="php"><span
                            class="s">&lt;?php</span>
<span class="c">// $a et $b sont les paramètres de la fonction et ils sont de type int</span>
<span class="s">function</span> multiplier(int $a,int $b) {
    <span class="s">return</span> $a * $b;
}</code></pre>
                    </figure>
                    <div class="bd-callout bd-callout-warning">
                        <h4>Compatibilité des indications de type</h4>
                        <p>L'indication de type pour les types de base (chaînes numériques, tableaux - tout ce qui
                            n'est pas un objet) n'a été introduite que dans PHP 7. Il est possible que votre
                            hébergeur soit toujours sur PHP 5, alors soyez prudent lorsque vous utilisez cette
                            fonctionnalité !</p>
                    </div>
                    <h4>déclarations du type de retour</h4>
                    <p>la déclaration du type de retour est surtout utile quand un autre programmeur doit créer la
                        fonction à partir de sa signature. L'utilisation est identique à la précédente, sauf que sont
                        emplacement est different. Il se situe à la fin de la déclaration de paramètre. </p>
                    <figure class="highlight"><pre><code class="language-php" data-lang="php"><span
                            class="s">&lt;?php</span>
<span class="c">// $a et $b sont les paramètres de la fonction et ils sont de type int</span>
<span class="s">function</span> multiplier(int $a,int $b) <span class="s">: int</span> {
    <span class="s">return</span> $a * $b;<span class="c">// le retour attendu est de type int </span>
}</code></pre>
                    </figure>
                    <div class="bd-callout bd-callout-info">
                        <h4>Signature d'une fonction</h4>
                        <p>Avec l'énoncé explicite du typage la signature devient :</p>
                        <figure class="highlight">
                            <pre><code class="language-php" data-lang="php"><span class="s">function</span> multiplier(int $a,int $b) <span
                                    class="s">: int</span></code></pre>
                        </figure>
                    </div>
                </article>
                <h3 id="fonctionsPortee">4 - Portée des variables</h3>
                <article>
                    <div class="bd-callout bd-callout-danger">
                        <h4>Attention</h4>
                        <p>En PHP, une variable définie à l'extérieur d'une fonction n'est pas accessible dans le corps
                            de cette fonction. Il s'agit d'une différence importante avec la plupart des autres langages
                            de programmation.</p>
                    </div>

                    <figure class="highlight"><pre><code class="language-php" data-lang="php"><span
                            class="s">&lt;?php</span>
$a = 1;
<span class="s">function</span> test() : string {
    <span class="s">return</span> '$a vaut ' . $a;<span class="c">// $a n'existe pas dans ce contexte</span>
}

 <span class="s">echo</span> test(); <span class="c">// Affiche uniquement "$a vaut "</span>
<span class="s">?&gt;</span></code></pre>
                    </figure>
                    <p>Le plus souvent, on externalise la définition des fonctions dans un fichier dédié qui est inclus
                        dans la page utilisant la fonction.</p>
                    <figure class="highlight">
                        <pre><code class="language-php" data-lang="php"><span class="s">&lt;?php </span>include "fonctions.php";<span
                                class="s">?&gt;</span></code></pre>
                    </figure>
                </article>
            </section>
        </main>
    </div>
</div>
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
<!--<script src="../js/jquery-3.3.1.slim.min.js"></script>-->
<!--<script src="../js/popper.min.js"></script>-->
<!--<script src="../js/bootstrap.min.js"></script>-->
<script src="../js/docs.min.js"></script>
</body>
</html>