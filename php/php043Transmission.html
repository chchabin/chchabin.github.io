<!doctype html>
<html lang="fr">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
          integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <!--    <link href="../css/bootstrap.min.css" rel="stylesheet" media="screen">-->
    <link href="../dist/css/bootstrap4-modif.css" rel="stylesheet" media="screen">
    <link href="../dist/css/docs.min.css" rel="stylesheet">
    <link href="../dist/css/docs.perso.css" rel="stylesheet">
    <title>PHP - transmettre des données</title>
    <script>
        /*        window.ga = window.ga || function () {
                    (ga.q = ga.q || []).push(arguments)
                };
                ga.l = +new Date;
                ga('create', 'UA-146052-10', 'chchabin.free.fr');
                ga('set', 'anonymizeIp', true);
                ga('send', 'pageview');*/
    </script>
</head>
<body>
<a class="skippy sr-only sr-only-focusable" href="#content">
    <span class="skippy-text">Skip to main content</span>
</a>
<!--        navbar-->
<header class="navbar navbar-expand navbar-dark flex-column flex-md-row bd-navbar">
    <a class="navbar-brand mr-0 mr-md-2" href="/" aria-label="Bootstrap">

    </a>

    <div class="navbar-nav-scroll">
        <ul class="navbar-nav bd-navbar-nav flex-row">
            <li class="nav-item">
                <a class="nav-link " href="php01Gintroduction.html"
                   onclick="ga('send', 'event', 'Navbar', 'Community links', 'Bootstrap');">Guide PHP</a>
            </li>
            <li class="nav-item">
                <a class="nav-link active" href="index.html"
                   onclick="ga('send', 'event', 'Navbar', 'Community links', 'Docs');">Documentation</a>
            </li>
        </ul>
    </div>
</header>
<div class="container-fluid">
    <div class="row flex-xl-nowrap">
        <!--        Menu Gauche-->
        <div class="col-12 col-md-3 col-xl-2 bd-sidebar">
            <nav class="collapse bd-links" id="bd-docs-nav">
                <div class="bd-toc-item">
                    <a class="bd-toc-link " href="php01Gintroduction.html">
                        I - Introduction au développement Web
                    </a>

                    <ul class="nav bd-sidenav">
                        <li>
                            <a href="#foncweb">
                                A - Le fonctionnement du Web
                            </a>
                        </li>
                        <li>
                            <a href="#protocole-HTTP">
                                B - Le protocole HTTP
                            </a>
                        </li>
                        <li>
                            <a href="#siteDyn">C - L'évolution vers des sites dynamiques
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="bd-toc-item ">
                    <a class="bd-toc-link" href="php02Gbaseslg.html">
                        II - Les bases du langage
                    </a>
                </div>
                <div class="bd-toc-item">
                    <a class="bd-toc-link" href="php031ProgPhp_Variables.html">
                        III - Programmer avec PHP
                    </a>

                    <ul class="nav bd-sidenav">
                        <li>
                            <a href="#variables">A - Les variables
                            </a>
                        </li>
                        <li>
                            <a href="#tests">B - Tests et conditions
                            </a>
                        </li>
                        <li>
                            <a href="#tableau">C - Les tableaux
                            </a>
                        </li>
                        <li>
                            <a href="#boucles">D - Les boucles
                            </a>
                        </li>
                        <li>
                            <a href="#fonctions"> E - Les fonctions
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="bd-toc-item active">
                    <a class="bd-toc-link" href="php041Transmission.html">
                        IV - Transmettre des données entre des pages
                    </a>

                    <ul class="nav bd-sidenav">
                        <li>
                            <a href="php041Transmission.html">A - Notion de variable superglobale
                            </a>
                        </li>
                        <li>
                            <a href="php042Transmission.html">B - Notion de formulaire
                            </a>
                        </li>
                        <li>
                            <a href="php043Transmission.html">C - <code>$_GET</code> et la transmission via l'URL
                            </a>
                        </li>
                        <li>
                            <a href="php044Transmission.html">D - <code>$_POST</code> et la transmission via un
                                formulaire
                            </a>
                        </li>
                        <li>
                            <a href="php045Transmission.html">E - <code>$_SESSION</code> et la transmission via la
                                session
                            </a>
                        </li>
                        <li>
                            <a href="php046Transmission.html">F - <code>htmlspecialchars</code> et la transmission de
                                données
                                et sécurité
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="bd-toc-item">
                    <a class="bd-toc-link" href="php05AccesSGBD_Introduction.html">
                        V - Accéder à une base de données
                    </a>

                    <ul class="nav bd-sidenav">
                        <li>
                            <a href="#sgbdIntro"> A - Introduction
                            </a>
                        </li>
                        <li>
                            <a href="#sgbdConect">B - Connexion à la base de données
                            </a>
                        </li>
                        <li>
                            <a href="#sgbdRequete">C - Exécution de requêtes SQL
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
        <!--        Menu droite-->
        <div class="d-none d-xl-block col-xl-2 bd-toc">
            <ul class="section-nav">
                <li class="toc-entry toc-h3"><a href="#creerurl">1 - Créer une URLe</a></li>
                <li class="toc-entry toc-h2"><a href="#recupurl">2 - Récupérer des données de l'URL</a></li>
                <li class="toc-entry toc-h2"><a href="#secu">3 - Problème de sécurité</a></li>
                <li class="toc-entry toc-h2"><a href="#cacher">4 -cacher des informations</a></li>
            </ul>
        </div>
        <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content" role="main">
            <h1 class="bd-title" id="content">IV - Transmettre des données entre des pages</h1>
            <p class="bd-lead">L'objectif de ce chapitre est de connaître les différents moyens de faire passer des
                informations d'une page PHP à l'autre, ce qui est un besoin fréquent lorsqu'on crée un site Web.</p>
            <h2 id="transmissionURL">C - <code>$_GET</code> et la transmission via l'URL</h2>
            <section>
                <h3 id="creerurl">1 - Créer une URL</h3>
                <article>
                    <p>Une URL représente l'adresse d'une page web et commence par <code>http://</code> ou
                        <code>https://</code>. Lorsqu'on fait un lien vers une autre page, il est possible d'ajouter des
                        paramètres sous la forme <code>bonjour.php?nom=Dupont&amp;prenom=Jean</code> qui seront transmis
                        à
                        la page.</p>
                    <p>
                        <img src="images/transmettre-donnees/url_get_parameters.png" alt=""/>
                    </p>
                    <p>Ici, l'URL accède d'abord au repertoire <code>monsite</code> du serveur puis au fichier <code>bonjour.php</code>.
                        Dans ce fichier sont envoyées 2 variables :</p>
                    <ul>
                        <li>nom avec la valeur dupont</li>
                        <li>prenom avec la valeur jean</li>
                    </ul>

                    <div class="bd-callout bd-callout-info">
                        <h4>Ajout de paramètres à l'URL</h4>
                        <p>On peut transmettre autant de paramètres que l'on veut dans une URL, la seule limite étant de
                            ne
                            pas
                            dépasser une longueur totale de 256 caractères.
                            Si par exemple vous voulez ajouter la variable <code>id</code> avec une valeur de 3, on
                            écrira :</p>
                        <figure class="highlight">
                            <pre><code class="language-php" data-lang="php">http://www.monsite.com/bonjour.php?<span
                                    class="s">nom=</span><span class="na">mauve</span>&<span
                                    class="s">prenom=</span><span
                                    class="na">guy</span>&<span class="s">id=</span><span
                                    class="na">3</span></code></pre>
                        </figure>
                    </div>
                    <div class="bd-callout bd-callout-info">
                        <h4>Avec quoi créer une l'URL</h4>
                        <p>2 éléments HTML permettent d'envoyer une URL :</p>
                        <ul>
                            <li>ancre avec la propriété href : <a
                                    href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/a">a</a></li>
                            <li>formulaire avec la propriété action : <a
                                    href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/form">form</a></li>
                        </ul>
                    </div>
                </article>
                <h3 id="recupurl">2 - Récupérer des données de l'URL</h3>
                <article>
                    <p>Dans ce cas, la page <code>bonjour.php</code> recevra ces paramètres dans la variable
                        superglobale
                        <code>$_GET</code> et défini automatiquement par PHP :</p>
                    <ul>
                        <li>
                            <code>$_GET['nom']</code> aura pour valeur <code>Dupont</code> ;
                        </li>
                        <li>
                            <code>$_GET['prenom']</code> aura pour valeur <code>Jean</code>.
                        </li>
                    </ul>
                    <p> le code de la page <code>bonjour.php</code> ressemblera à ceci :</p>
                    <figure class="highlight"><pre><code class="language-php" data-lang="php"><span
                            class="s">&lt;?php</span>
$nom=<span class="s">$_GET</span>['nom'];
$prenom=<span class="s">$_GET</span>['prenom'];
<span class="s">echo</span> 'Bonjour'<span class="s">.</span>$prenon<span class="s">.</span>$nom</code></pre>
                    </figure>
                    <p>Le résultat obtenu sera :</p>
                    <figure class="highlight">
                        <pre><code class="language-php" data-lang="php">Bonjour jean Dupont</code></pre>
                    </figure>
                    <p>Avant d'utiliser un paramètre transmis dans l'URL, on peut utiliser la fonction
                        <code>isset</code>
                        qui permet de vérifier si ce paramètre est défini ou non. La modifications pour
                        <code>$nom</code> sera ceci:</p>
                    <figure class="highlight"><pre><code class="language-php" data-lang="php"><span
                            class="s">if</span>(<span class="s">isset</span>(<span class="s">$_GET</span>['nom']) {
    <span class="c">// Utilisation de $_GET['nom']</span>
    $nom=<span class="s">$_GET</span>['nom'];
}
 <span class="s">else</span> {
    $nom=null;
}</code></pre>
                    </figure>
                </article>
                <h3 id="secu">3 - Problème de sécurité</h3>
                <article>
                    <p>
                        Mais attention! Il y a une faille de sécurité cachée dans ce code! Bien que PHP soit un langage
                        de programmation facile à apprendre, il s'avère qu'il est également particulièrement facile
                        d'introduire des problèmes de sécurité dans les sites Web utilisant PHP, si vous ne savez pas
                        quelles précautions prendre. Avant d'aller plus loin avec le langage, je veux m'assurer que vous
                        êtes en mesure de repérer et de résoudre ce problème de sécurité particulier, car c'est
                        probablement le plus courant sur le Web aujourd'hui.
                        <br>Le problème de sécurité, ici, provient du fait que le script <code>bonjour.php</code> génère
                        une page contenant du contenu sous le contrôle de l'utilisateur - dans ce cas, les variables
                        $nom et $prenom. Bien que les
                        variable $nom et $prenom reçoivent normalement une valeur de la chaîne de requête URL dans le
                        lien,
                        un utilisateur malveillant pourrait modifier l'URL pour envoyer une valeur différente pour
                        la variable nom.
                        <br>En modifiant l'URL pour insérer une balise <code>&lt;strong&gt;</code> avant le nom et une
                        balise <code>&lt;strong&gt;</code> après le nom:
                        Vous notez que le nom de la page est maintenant
                        en gras, comme indiqué dans l'image suivante: (Vous remarquerez peut-être que certains
                        navigateurs convertiront automatiquement les caractères < et > en séquences d'échappement d'URL
                        ( %3C et %3E respectivement), mais de toute façon, PHP recevra la même valeur.)
                    </p>
                    <figure class="highlight">
                        <pre><code class="language-php"
                                   data-lang="php">Bonjour jean <strong>Dupont</strong></code></pre>
                    </figure>
                    <p>Pour remédier à ce problème, il faut également prendre une
                        précaution
                        supplémentaire pour éviter certaines failles de sécurité (voir plus loin <a
                                href="#transmissionData">Transmission de données et sécurité</a>).</p>

                </article>
                <h3 id="cacher">4 -cacher des informations</h3>
                <article>
                    <p>La balise HTML <code>input type="hidden"</code> permet de stocker des informations dans la page,
                        sans que celles-ci soient visibles pour l'utilisateur.</p>
                    <p>Cette balise peut être très utile lorsque le programmeur veut transmettre des informations à
                        l'URL sns avoir à les afficher pour utilisateur.
                    <br>Par exemple, le formulaire suivant envoie en plus du nom et du prénom le nom du formulaire</p>
                    <figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;!doctype html&gt;</span>
  <span class="nt">&lt;head </span><span class="na">lang=</span><span class="s">"fr"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta </span><span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;title&gt;</span>Mon premier formulaire<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;form </span><span class="na">action=</span><span class="s">"login.php"</span><span class="na"> method=</span><span
                                class="s">"post"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;input </span><span class="na">type=</span><span class="s">"hidden"</span><span class="na"> name=</span><span
                                class="s">"info"</span><span class="na"> value=</span><span
                                class="s">"formulaire1"</span><span
                                class="na"> required</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label </span><span class="na">for=</span><span class="s">"inputLogin"</span><span
                                class="nt">&gt;</span>Entrez votre login :<span class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;input </span><span class="na">type=</span><span class="s">"text"</span><span class="na"> name=</span><span
                                class="s">"login"</span><span class="na"> id=</span><span
                                class="s">"inputLogin"</span><span
                                class="na"> required</span><span class="nt">&gt;</span>

        <span class="nt">&lt;label </span><span class="na">for=</span><span class="s">"inputMdp"</span><span class="nt">&gt;</span>Entrez votre mot de passe :<span
                                class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;input </span><span class="na">type=</span><span class="s">"password"</span><span
                                class="na"> name=</span><span class="s">"password"</span><span
                                class="na"> id=</span><span
                                class="s">"inputMdp"</span><span class="na"> required</span><span class="nt">&gt;</span>

        <span class="nt">&lt;input </span><span class="na">type=</span><span class="s">"submit"</span><span class="na"> value=</span><span
                                class="s">"Envoyer"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre>
                    </figure>
                    <p>A l'affichage nous obtiendrons la même chose que précédemment :</p>
                    <img class="highlight" src="images/transmettre-donnees/formulaire.png" alt=""/>
                    <p>L'URL lorsque le formulaire est saisi sera :</p>
                    <figure class="highlight">
                            <pre><code class="language-php" data-lang="php">http://www.monsite.com/bonjour.php?<span
                                    class="s">nom=</span><span class="na">mauve</span>&<span
                                    class="s">prenom=</span><span
                                    class="na">guy</span>&<span class="s">info=</span><span
                                    class="na">formulaire1</span></code></pre>
                    </figure>
                </article>
            </section>
        </main>
    </div>
</div>
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
<!--<script src="../js/jquery-3.3.1.slim.min.js"></script>-->
<!--<script src="../js/popper.min.js"></script>-->
<!--<script src="../js/bootstrap.min.js"></script>-->
<script src="../js/docs.min.js"></script>
</body>
</html>