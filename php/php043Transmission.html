<!doctype html>
<html lang="fr">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="../dist/5.0/css/bootstrap.min.css" rel="stylesheet" media="screen">
       <link href="../dist/5.0/css/docs.css" rel="stylesheet">
    <link rel="icon" type="image/png"  href="../img/favicon.png">
    <title>PHP - transmettre des données</title>

</head>
<body>

<!--        navbar-->
<header class="navbar navbar-expand-md navbar-dark bd-navbar bg-success">
    <nav class="container-xxl flex-wrap flex-md-nowrap" aria-label="Main navigation">
        <div class="collapse navbar-collapse" id="bdNavbar">
            <ul class="navbar-nav flex-row flex-wrap bd-navbar-nav pt-2 py-md-0">
                <li class="nav-item">
                    <a class="nav-link " href="php01Gintroduction.html">Guide PHP</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="index.html">Documentation</a>
                </li>
            </ul>
        </div>
    </nav>
</header>
<nav class="bd-subnavbar py-2" aria-label="Secondary navigation"></nav>
<div class="container-xxl my-md-4 bd-layout">
    <!--        Menu Gauche-->
    <aside class="bd-sidebar">
        <nav class="collapse bd-links" id="bd-docs-nav" aria-label="Docs navigation">
            <ul class="list-unstyled mb-0 py-3 pt-md-1">
               <li class="mb-1">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start justify-content-start" data-bs-toggle="collapse" data-bs-target="#php01Gintroduction" aria-expanded="false">
                        I - Introduction au développement Web
                    </button>
                    <div class="collapse" id="php01Gintroduction">
                        <ul class="list-unstyled fw-normal pb-1 small">
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed" href="php01Gintroduction.html#foncweb">
                                    Principes de fonctionnement du Web
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="mb-1">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start"
                            data-bs-toggle="collapse" data-bs-target="#php02Gbaseslg" aria-expanded="false">
                        II - Les bases du langage
                    </button>
                    <div class="collapse" id="php02Gbaseslg">

                        <ul class="list-unstyled fw-normal pb-1 small">
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php02Gbaseslg.html">Les bases du langage
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="mb-1">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start"
                            data-bs-toggle="collapse" data-bs-target="#php031ProgPhp_Variables" aria-expanded="false">
                        III - Programmer avec PHP
                    </button>
                    <div class="collapse" id="php031ProgPhp_Variables">

                        <ul class="list-unstyled fw-normal pb-1 small">
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php031ProgPhp_Variables.html">A - Les variables
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php032ProgPhp_Tests.html">B - Tests et conditions
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php033ProgPhp_Tableaux.html">C - Les tableaux
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php034ProgPhp_Boucles.html">D - Les boucles
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php035ProgPhp_Fonctions.html"> E - Les fonctions
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php036ProgPhp_Raccourcis.html"> F - Les raccourcis
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="mb-1 active">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start"
                            data-bs-toggle="collapse" data-bs-target="#php041Transmission" aria-expanded="true"
                            aria-current="true">
                        IV - Transmettre des données entre des pages
                    </button>
                    <div class="collapse show" id="php041Transmission">

                        <ul class="list-unstyled fw-normal pb-1 small">
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php041Transmission.html">A - Notion de variable superglobale
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php042Transmission.html">B - Notion de formulaire
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded active"
                                   href="php043Transmission.html">C - $_GET et la transmission via l'URL
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php044Transmission.html">D - $_POST et la transmission via un formulaire
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php045Transmission.html">E - $_SESSION et la transmission via la session
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php046Transmission.html">F - La transmission de données et sécurité
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="mb-1">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start"
                            data-bs-toggle="collapse" data-bs-target="#php05AccesSGBD_Introduction"
                            aria-expanded="false">
                        V - Accéder à une base de données
                    </button>
                    <div class="collapse" id="php05AccesSGBD_Introduction">

                        <ul class="list-unstyled fw-normal pb-1 small">
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php05AccesSGBD_Introduction.html"> A - Introduction
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php05AccesSGBD_Connexion.html">B - Connexion à la base de données
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php05AccesSGBD_RappelSQL.html">C - Rappel SQL avec SELECT
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php05AccesSGBD_RqtSimple.html">D - query - Requêtes simples
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="php05AccesSGBD_RqtParam.html">E - prepare et execute - Requêtes avec paramètres
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed" href="php05AccesSGBD_RqtLMD.html">F - Le cas particulier avec INSERT, UPDATE,
                                    DELETE et exec</a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="mb-1">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start justify-content-start"
                            data-bs-toggle="collapse" data-bs-target="#phpTP" aria-expanded="false">
                        TP - les bases du PHP
                    </button>
                    <div class="collapse" id="phpTP">
                        <ul class="list-unstyled fw-normal pb-1 small">
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="tp01htmlPhpNew.html">
                                    TP01 - Affichage, déclaration de variables, tableaux
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed" href="tp02htmlPhpNew.html">
                                    TP02 - Tableaux, Boucles, formulaires
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed" href="tp03htmlPhpNew.html">
                                    TP03 - Tableaux Associatifs, Boucles foreach
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed" href="tp04htmlPhpNew.html">
                                    TP04 - Pattern MVC

                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed" href="tp05htmlPhpNew.html">
                                    TP05 - Pattern MVC, Session

                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed" href="tp06htmlPhpNew.html">
                                    TP06 - Pattern MVC, connexion à un SGBD
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="mb-1">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start justify-content-start"
                            data-bs-toggle="collapse" data-bs-target="#phpEx" aria-expanded="false">
                        Exercices sur le MVC
                    </button>
                    <div class="collapse" id="phpEx">
                        <ul class="list-unstyled fw-normal pb-1 small">
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed" href="ex01htmlPhp.html">
                                    Ex01 - Modifier un site en fonction du pattern MVC
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="ex02htmlPhp.html">
                                    Ex02 - Création d'un contrôleur
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
        </nav>
    </aside>
    <main class="bd-main order-1">
        <!--            Titre-->
        <div class="bd-intro ps-lg-4">
            <div class="d-md-flex flex-md-row align-items-center justify-content-between">
                <h1 class="bd-title" id="content">IV - Transmettre des données entre des pages</h1>
            </div>
            <p class="bd-lead">L'objectif de ce chapitre est de connaître les différents moyens de faire passer des
                informations d'une page PHP à l'autre, ce qui est un besoin fréquent lorsqu'on crée un site Web.</p>
        </div>
        <!--        Menu droite-->
        <div class="bd-toc mt-4 mb-5 my-md-0 ps-xl-3 mb-lg-5 text-muted">
            <strong class="d-block h6 my-2 pb-2 border-bottom">Dans cette page</strong>
            <nav id="TableOfContents">
                <ul>
                    <li><a href="#creerurl">1 - Créer une URLe</a></li>
                    <li><a href="#recupurl">2 - Récupérer des données de l'URL</a></li>
                    <li><a href="#secu">3 - Problème de sécurité</a></li>
                    <li><a href="#cacher">4 -cacher des informations</a></li>
                </ul>
            </nav>
        </div>

        <!--            Docs-->
        <div class="bd-content ps-lg-4">
            <h2 id="transmissionURL">C - <code>$_GET</code> et la transmission via l'URL</h2>
            <section>
                <h3 id="creerurl">1 - Créer une URL</h3>
                <article>
                    <p>Une URL représente l'adresse d'une page web et commence par <code>http://</code> ou
                        <code>https://</code>. Lorsqu'on fait un lien vers une autre page, il est possible d'ajouter des
                        paramètres sous la forme <code>bonjour.php?nom=Dupont&amp;prenom=Jean</code> qui seront transmis
                        à
                        la page.</p>
                    <p>
                        <img src="images/transmettre-donnees/url_get_parameters.png" alt=""/>
                    </p>
                    <p>Ici, l'URL accède d'abord au repertoire <code>monsite</code> du serveur puis au fichier <code>bonjour.php</code>.
                        Dans ce fichier sont envoyées 2 variables :</p>
                    <ul>
                        <li>nom avec la valeur dupont</li>
                        <li>prenom avec la valeur jean</li>
                    </ul>

                    <div class="bd-callout bd-callout-info">
                        <h4>Ajout de paramètres à l'URL</h4>
                        <p>On peut transmettre autant de paramètres que l'on veut dans une URL, la seule limite étant de
                            ne
                            pas
                            dépasser une longueur totale de 256 caractères.
                            Si par exemple vous voulez ajouter la variable <code>id</code> avec une valeur de 3, on
                            écrira :</p>
                        <div class="highlight">
                            <div class="highlight">
                    <pre><code class="language-php" data-lang="php">http://www.monsite.com/bonjour.php?<span
                                    class="s">nom=</span><span class="na">mauve</span>&<span
                                    class="s">prenom=</span><span
                                    class="na">guy</span>&<span class="s">id=</span><span
                                    class="na">3</span></code></pre>
                        </div>
                    </div>
                    <div class="bd-callout bd-callout-info">
                        <h4>Avec quoi créer une l'URL</h4>
                        <p>2 éléments HTML permettent d'envoyer une URL :</p>
                        <ul>
                            <li>ancre avec la propriété href : <a
                                    href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/a">a</a></li>
                            <li>formulaire avec la propriété action : <a
                                    href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/form">form</a></li>
                        </ul>
                    </div>
                </article>
                <h3 id="recupurl">2 - Récupérer des données de l'URL</h3>
                <article>
                    <p>Dans ce cas, la page <code>bonjour.php</code> recevra ces paramètres dans la variable
                        superglobale
                        <code>$_GET</code> et défini automatiquement par PHP :</p>
                    <ul>
                        <li>
                            <code>$_GET['nom']</code> aura pour valeur <code>Dupont</code> ;
                        </li>
                        <li>
                            <code>$_GET['prenom']</code> aura pour valeur <code>Jean</code>.
                        </li>
                    </ul>
                    <p> le code de la page <code>bonjour.php</code> ressemblera à ceci :</p>
                    <div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span
                            class="s">&lt;?php</span>
$nom=<span class="s">$_GET</span>['nom'];
$prenom=<span class="s">$_GET</span>['prenom'];
<span class="s">echo</span> 'Bonjour'<span class="s">.</span>$prenon<span class="s">.</span>$nom</code></pre>
                    </div>
                    <p>Le résultat obtenu sera :</p>
                    <div class="highlight">
                        <div class="highlight">
                    <pre><code class="language-php" data-lang="php">Bonjour jean Dupont</code></pre>
                    </div>
                    <p>Avant d'utiliser un paramètre transmis dans l'URL, on peut utiliser la fonction
                        <code>isset</code>
                        qui permet de vérifier si ce paramètre est défini ou non. La modifications pour
                        <code>$nom</code> sera ceci:</p>
                    <div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span
                            class="s">if</span>(<span class="s">isset</span>(<span class="s">$_GET</span>['nom']) {
    <span class="c">// Utilisation de $_GET['nom']</span>
    $nom=<span class="s">$_GET</span>['nom'];
}
 <span class="s">else</span> {
    $nom=null;
}</code></pre>
                    </div>
                </article>
                <h3 id="secu">3 - Problème de sécurité</h3>
                <article>
                    <p>
                        Mais attention! Il y a une faille de sécurité cachée dans ce code! Bien que PHP soit un langage
                        de programmation facile à apprendre, il s'avère qu'il est également particulièrement facile
                        d'introduire des problèmes de sécurité dans les sites Web utilisant PHP, si vous ne savez pas
                        quelles précautions prendre. Avant d'aller plus loin avec le langage, je veux m'assurer que vous
                        êtes en mesure de repérer et de résoudre ce problème de sécurité particulier, car c'est
                        probablement le plus courant sur le Web aujourd'hui.
                        <br>Le problème de sécurité, ici, provient du fait que le script <code>bonjour.php</code> génère
                        une page contenant du contenu sous le contrôle de l'utilisateur - dans ce cas, les variables
                        $nom et $prenom. Bien que les
                        variable $nom et $prenom reçoivent normalement une valeur de la chaîne de requête URL dans le
                        lien,
                        un utilisateur malveillant pourrait modifier l'URL pour envoyer une valeur différente pour
                        la variable nom.
                        <br>En modifiant l'URL pour insérer une balise <code>&lt;strong&gt;</code> avant le nom et une
                        balise <code>&lt;strong&gt;</code> après le nom:
                        Vous notez que le nom de la page est maintenant
                        en gras, comme indiqué dans l'image suivante: (Vous remarquerez peut-être que certains
                        navigateurs convertiront automatiquement les caractères < et > en séquences d'échappement d'URL
                        ( %3C et %3E respectivement), mais de toute façon, PHP recevra la même valeur.)
                    </p>
                    <div class="highlight">
                        <div class="highlight">
                    <pre><code class="language-php"
                                   data-lang="php">Bonjour jean <strong>Dupont</strong></code></pre>
                    </div>
                    <p>Pour remédier à ce problème, il faut également prendre une
                        précaution
                        supplémentaire pour éviter certaines failles de sécurité (voir plus loin <a
                                href="php046Transmission.html#transmissionData">Transmission de données et sécurité</a>).
                    </p>

                </article>
                <h3 id="cacher">4 -cacher des informations</h3>
                <article>
                    <p>La balise HTML <code>input type="hidden"</code> permet de stocker des informations dans la page,
                        sans que celles-ci soient visibles pour l'utilisateur.</p>
                    <p>Cette balise peut être très utile lorsque le programmeur veut transmettre des informations à
                        l'URL sns avoir à les afficher pour utilisateur.
                        <br>Par exemple, le formulaire suivant envoie en plus du nom et du prénom le nom du formulaire
                    </p>
                    <div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span
                            class="cp">&lt;!doctype html&gt;</span>
  <span class="nt">&lt;head </span><span class="na">lang=</span><span class="s">"fr"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta </span><span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;title&gt;</span>Mon premier formulaire<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;form </span><span class="na">action=</span><span class="s">"login.php"</span><span class="na"> method=</span><span
                                class="s">"post"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;input </span><span class="na">type=</span><span class="s">"hidden"</span><span class="na"> name=</span><span
                                class="s">"info"</span><span class="na"> value=</span><span
                                class="s">"formulaire1"</span><span
                                class="na"> required</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label </span><span class="na">for=</span><span class="s">"inputLogin"</span><span
                                class="nt">&gt;</span>Entrez votre login :<span class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;input </span><span class="na">type=</span><span class="s">"text"</span><span class="na"> name=</span><span
                                class="s">"login"</span><span class="na"> id=</span><span
                                class="s">"inputLogin"</span><span
                                class="na"> required</span><span class="nt">&gt;</span>

        <span class="nt">&lt;label </span><span class="na">for=</span><span class="s">"inputMdp"</span><span class="nt">&gt;</span>Entrez votre mot de passe :<span
                                class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;input </span><span class="na">type=</span><span class="s">"password"</span><span
                                class="na"> name=</span><span class="s">"password"</span><span
                                class="na"> id=</span><span
                                class="s">"inputMdp"</span><span class="na"> required</span><span class="nt">&gt;</span>

        <span class="nt">&lt;input </span><span class="na">type=</span><span class="s">"submit"</span><span class="na"> value=</span><span
                                class="s">"Envoyer"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre>
                    </div>
                    <p>A l'affichage nous obtiendrons la même chose que précédemment :</p>
                    <img class="highlight" src="images/transmettre-donnees/formulaire.png" alt=""/>
                    <p>L'URL lorsque le formulaire est saisi sera :</p>
                    <div class="highlight">
                            <div class="highlight">
                    <pre><code class="language-php" data-lang="php">http://www.monsite.com/bonjour.php?<span
                                    class="s">nom=</span><span class="na">mauve</span>&<span
                                    class="s">prenom=</span><span
                                    class="na">guy</span>&<span class="s">info=</span><span
                                    class="na">formulaire1</span></code></pre>
                    </div>
                </article>
            </section>
        </div>
    </main>
</div>
<script src="../dist/5.0/js/bootstrap.bundle.min.js"></script>
<script src="../dist/5.0/js/docs.min.js"></script>
</body>
</html>