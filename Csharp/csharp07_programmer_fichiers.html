<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="../dist/5.0/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="../dist/5.0/css/docs.css" rel="stylesheet">

    <title>Programmer avec C#</title>
</head>
<body>
<header class="navbar navbar-expand-md navbar-dark bd-navbar bg-success">
    <nav class="container-xxl flex-wrap flex-md-nowrap" aria-label="Main navigation">
  <div class="collapse navbar-collapse" id="bdNavbar">
        <ul class="navbar-nav flex-row flex-wrap bd-navbar-nav pt-2 py-md-0">
            <li class="nav-item">
                <a class="nav-link " href="csharp01_intro.html">Guide C#</a>
            </li>
        </ul>
        </div>
    </nav>
</header>
<nav class="bd-subnavbar py-2" aria-label="Secondary navigation"></nav>
<div class="container-xxl my-md-4 bd-layout">
    <!--    Menu Gauche-->
    <aside class="bd-sidebar">
        <nav class="collapse bd-links" id="bd-docs-nav" aria-label="Docs navigation">
            <ul class="list-unstyled mb-0 py-3 pt-md-1">
                <li class="mb-1">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start justify-content-start"
                            data-bs-toggle="collapse" data-bs-target="#csharp01_intro" aria-expanded="false">
                        I - Introduction au développement
                    </button>
                    <div class="collapse" id="csharp01_intro">
                        <ul class="list-unstyled fw-normal pb-1 small">
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="csharp01_intro.html#contentMachine">A - Qu'est ce qu'une machine ?
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="csharp01_intro.html#contentArt">B - L ’art et la manière de bien programmer
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="csharp01_intro.html#contentBonnesP"> C - La culture et les bonnes pratiques
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="mb-1">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start"
                            data-bs-toggle="collapse"
                            data-bs-target="#csharp02_basesLg" aria-expanded="false">
                        II - Les bases du langage
                    </button>
                    <div class="collapse" id="csharp02_basesLg">
                        <ul class="list-unstyled fw-normal pb-1 small">

                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="csharp02_basesLg.html#source">A - Anatomie
                                    d'un fichier source
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="csharp02_basesLg.html#bloc">B - Définition
                                    d'un bloc de code
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="csharp02_basesLg.html#affiche">C - Affichage
                                    de texte
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="csharp02_basesLg.html#comment">D -
                                    Commentaires
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="csharp02_basesLg.html#indentation">E -
                                    l'indentation
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="csharp02_basesLg.html#nommage">F -
                                    Conventions de nommage
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="mb-1 active">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start"
                            data-bs-toggle="collapse"
                            data-bs-target="#csharp03_programmer-variables" aria-expanded="true" aria-current="true">
                        III - Programmer avec C#
                    </button>
                    <div class="collapse show" id="csharp03_programmer-variables">

                        <ul class="list-unstyled fw-normal pb-1 small">

                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="csharp03_programmer-variables.html"> A - Les variables
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="csharp04_programmer_test.html">B - Les tests et conditions
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="csharp05_programmer_tableau.html">C - Les tableaux
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="csharp06_programmer_boucles.html">D - Les boucles
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="csharp07_programmer_fonctions.html">E - Les fonctions
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded active"
                                   href="csharp07_programmer_fichiers.html">F - Les fichiers
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="csharp07_programmer_exceptions.html">G - Les exceptions
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="mb-1">
                    <button class="btn d-inline-flex align-items-center rounded collapsed text-start"
                            data-bs-toggle="collapse"
                            data-bs-target="#csharp08_objet_overview" aria-expanded="false">
                        IV - Programmation objet avec C#
                    </button>
                    <div class="collapse" id="csharp08_objet_overview">
                        <ul class="list-unstyled fw-normal pb-1 small">

                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="csharp08_objet_overview.html">L'approche Objet
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="csharp09_objet_creation.html">Création d'objet en C#
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="csharp10_objet_concpets.html">Principaux concepts objets
                                </a>
                            </li>
                            <li>
                                <a class="d-inline-flex align-items-center rounded collapsed"
                                   href="csharp11_objet_relations.html">Les relations entre les classes
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
        </nav>
    </aside>
    <main class="bd-main order-1">
        <!--            Titre-->
        <div class="bd-intro ps-lg-4">
            <div class="d-md-flex flex-md-row align-items-center justify-content-between">
                <h1 class="bd-title" id="base">F - Les fichiers</h1>
            </div>
            <p class="bd-lead">L'objectif de ce chapitre est de savoir utiliser les structures de bases de la
                programmation avec
                le langage C#.</p>
        </div>
        <!--        Menu droite-->
        <div class="bd-toc mt-4 mb-5 my-md-0 ps-xl-3 mb-lg-5 text-muted">
            <strong class="d-block h6 my-2 pb-2 border-bottom">Dans cette page</strong>
            <nav id="TableOfContents">
                <ul>
                </ul>
            </nav>
        </div>

        <!--            Docs-->
        <div class="bd-content ps-lg-4">
            <div class="bd-callout bd-callout-info">
                <h4>Info</h4>
                <p>Pour faciliter la compréhension du langage nous utiliserons le mode console.</p>
            </div>

            <p>En C#, la plupart des périphériques sont considérés comme des
                ﬂux entrants et sortants. Cela signiﬁe que si le ﬂux n’est pas mémorisé, les données transmises sont
                perdues (un peu comme une chaîne en direct : si vous êtes absent de l’écran, les informations sont
                perdues).</p>
            <img class="img-fluid" src="img/buffer.PNG" alt="Le buffer">
            <p>Comme la plupart des périphériques acceptent les entrées et les sorties, cela multiplie par deux les
                ﬂux et buffets à déclarer.</p>
            <div class="bd-callout bd-callout-danger">
                <h4>ATTENTION</h4>
                <p> la lecture d’un ﬂux vide entraîne la génération d’une exception qui bloque l’exécution du
                    programme.</p>
            </div>
            <p>Ainsi, la plupart du temps (et c’est aussi vrai en Java), il faudra ouvrir le ﬂux et ouvrir un buffer
                :</p>
            <ol>
                <li>Ouvrir le ﬂux du ﬁchier</li>
                <li>Ouvrir le buffet du ﬂux du ﬁchier</li>
                <li>Lire/Écrire dans le buffer</li>
                <li>Fermer le buffer</li>
                <li>Fermer le ﬂux</li>
            </ol>
            <p>Code pour la lecture dans un fichier :</p>
            <div class="highlight"><pre class="chroma"><code class="language-csharp" data-lang="csharp"><span
                    class="nt">using</span> System;
<span class="nt">namespace</span> FileReadExample
{

    <span class="nt">class</span> <span class="cp">HelloWorld</span> {
    <span class="nt">static</span> <span class="nt">void</span> Main() {
        <span class="cp">FileStream</span> monFlux = null ; <span class="c">// Créer un objet flux (en direct)</span>
        <span class="cp">StreamReader</span> reader = null; <span class="c">// Créer un objet lecteur de flux (bufferise)</span>
        <span class="nt">string</span> fileContent = "";
        <span class="nt">try</span>
        {
            <span class="c">// Ouverture</span>
            monFlux = <span class="nt">new</span> <span class="cp">FileStream</span>(@"e:\test.txt",<span class="cp">FileMode</span>.Open);
            reader = <span class="nt">new</span> <span class="cp">StreamReader</span>(monFlux, Encoding.UTF8);
            <span class="c">// Lecture</span>
            <span class="cp">Console</span>.WriteLine("Votre fichier contient : ");
            fileContent = reader.ReadToEnd();
            <span class="cp">Console</span>.WriteLine(fileContent)3
        }
        <span class="nt">catch</span> (Exception ex)
        {
            <span class="cp">Console</span>.WriteLine("Erreur de lecture !"+ex.Message);
        }
        <span class="nt">finally</span>
        {
            <span class="c">// Fermeture</span>
            <span class="nt">if</span> (reader != <span class="nt">null</span>)
            { reader.Dispose(); <span class="c">// Fermer le buffer (libère sa mémoire)</span>}
            <span class="nt">if</span> (reader != <span class="nt">null</span>)
            { monFlux.Dispose(); <span class="c">// Fermer le fichier (libère 1e canal)</span>}
        }
    }
}</code></pre>
            </div>
            <p>Code pour l'écriture dans un fichier :</p>
            <div class="highlight"><pre class="chroma"><code class="language-csharp" data-lang="csharp"><span
                    class="nt">using</span> System;
<span class="nt">namespace</span> FileReadExample
{

    <span class="nt">class</span> <span class="cp">HelloWorld</span> {
    <span class="nt">static</span> <span class="nt">void</span> Main() {
        <span class="cp">FileStream</span> monFlux = null ; <span class="c">// Créer un objet flux (en direct)</span>
        <span class="cp">StreamWriter</span> writer = null; <span class="c">// Créer un objet lecteur de flux (bufferise)</span>
        <span class="nt">string</span> fileContent = "";
        <span class="nt">try</span>
        {
            <span class="c">// Ouverture pour ajouter une donnée</span>
            monFlux = <span class="nt">new</span> <span class="cp">FileStream</span>(@"e:\test.txt",<span class="cp">FileMode</span>.Append);
            <span class="nt">using</span> (writer = <span class="nt">new</span> <span class="cp">StreamWriter</span>(monFlux, Encoding.UTF8));)
            {writer.WriteLine(<span class="nt">)"Écriture d'une ligne"</span>; <span class="c">// Écriture</span>}
            <span class="cp">Console</span>.WriteLine("L'écriture s'est correctement réalisée ");
        }
        <span class="nt">catch</span> (Exception ex)
        {
            <span class="cp">Console</span>.WriteLine("Erreur de lecture !"+ex.Message);
        }
        <span class="nt">finally</span>
        {
            <span class="c">// Fermeture</span>
            <span class="nt">if</span> (reader != <span class="nt">null</span>)
            { writer.Dispose(); <span class="c">// Fermer le buffer (libère sa mémoire)</span>}
            <span class="nt">if</span> (reader != <span class="nt">null</span>)
            { monFlux.Dispose(); <span class="c">// Fermer le fichier (libère 1e canal)</span>}
        }
    }
}</code></pre>
            </div>
        </div>
    </main>
</div>
<script src="../dist/5.0/js/bootstrap.bundle.min.js"></script>
<script src="../dist/5.0/js/docs.min.js"></script>
</body>
</html>